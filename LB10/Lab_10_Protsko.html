<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Звіт з лабораторної роботи №10</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .author {
            text-align: center;
            font-style: italic;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        .topic-goal {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        h2 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-top: 30px;
        }
        
        h3 {
            color: #34495e;
            background: linear-gradient(90deg, #74b9ff, #0984e3);
            color: white;
            padding: 12px 20px;
            border-radius: 10px;
            margin: 25px 0 15px 0;
        }
        
        h4 {
            color: #2980b9;
            font-size: 1.2em;
            margin: 20px 0 10px 0;
        }
        
        .codes-list {
            background: #f8f9fa;
            border-left: 5px solid #3498db;
            padding: 20px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
            font-family: 'Courier New', monospace;
        }
        
        .codes-list li {
            margin: 8px 0;
            font-weight: bold;
        }
        
        .tree-image {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: #f1f2f6;
            border-radius: 15px;
            border: 2px dashed #3498db;
        }
        
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            overflow-x: auto;
            border: 1px solid #4a5568;
            position: relative;
        }
        
        .code-block::before {
            content: "Python";
            position: absolute;
            top: 10px;
            right: 15px;
            background: #3182ce;
            color: white;
            padding: 4px 12px;
            border-radius: 5px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .code-block pre {
            margin: 0;
            font-family: 'Courier New', Monaco, monospace;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .output-block {
            background: #1a202c;
            color: #68d391;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            border-left: 4px solid #68d391;
        }
        
        .questions-section {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 30px;
            border-radius: 20px;
            margin: 40px 0;
        }
        
        .question {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .question:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }
        
        .question-number {
            font-weight: bold;
            color: #e74c3c;
            font-size: 1.1em;
        }
        
        .answer {
            margin-top: 10px;
            padding-left: 20px;
            border-left: 3px solid #3498db;
            color: #2c3e50;
        }
        
        .highlight {
            background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
        }
        
        .center {
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin: 30px 0;
        }
        
        ul, ol {
            padding-left: 25px;
        }
        
        li {
            margin: 8px 0;
        }
        
        .step-list {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .step-list ol {
            counter-reset: step-counter;
        }
        
        .step-list li {
            counter-increment: step-counter;
            margin: 10px 0;
            position: relative;
            padding-left: 30px;
        }
        
        .step-list li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: #3498db;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Звіт з лабораторної роботи №10</h1>
        
        <div class="author">
            Виконала студентка групи КН-24-1 Процко П.Д.
        </div>
        
        <div class="topic-goal">
            <strong>Тема:</strong> Стиснення даних. Жадібна стратегія на прикладі кодування Гафмена<br><br>
            <strong>Мета:</strong> навчитись реалізовувати алгоритм побудови дерева оптимальних кодів Гафмена на основі черги з пріоритетом (за допомогою купи) засобами Python.
        </div>
        
        <div class="center">Хід роботи</div>
        
        <h3>1. Побудувати дерево кодів Гафмена згідно з варіантом і візуалізувати дерево</h3>
        
        <h4>Коди Гафмена для кожного символу AABBBCCCDDDDDEEEEEFFFFFGGGGGHHHHHIIII:</h4>
        
        <div class="codes-list">
            <ul>
                <li>A: 1100 (частота: 2)</li>
                <li>B: 000 (частота: 3)</li>
                <li>C: 1101 (частота: 3)</li>
                <li>D: 010 (частота: 5)</li>
                <li>E: 011 (частота: 5)</li>
                <li>F: 101 (частота: 5)</li>
                <li>G: 100 (частота: 5)</li>
                <li>H: 111 (частота: 5)</li>
                <li>I: 001 (частота: 4)</li>
            </ul>
        </div>
        
        <h4>Двійкове дерево</h4>
        <div class="tree-image">
            <svg width="800" height="500" viewBox="0 0 800 500" style="background: white; border-radius: 10px;">
                <!-- Connections -->
                <!-- Root to main branches -->
                <line x1="400" y1="50" x2="250" y2="120" stroke="#2c3e50" stroke-width="2"/>
                <line x1="400" y1="50" x2="550" y2="120" stroke="#2c3e50" stroke-width="2"/>
                
                <!-- Left subtree connections -->
                <line x1="250" y1="120" x2="150" y2="190" stroke="#2c3e50" stroke-width="2"/>
                <line x1="250" y1="120" x2="350" y2="190" stroke="#2c3e50" stroke-width="2"/>
                
                <!-- Right subtree connections -->
                <line x1="550" y1="120" x2="450" y2="190" stroke="#2c3e50" stroke-width="2"/>
                <line x1="550" y1="120" x2="650" y2="190" stroke="#2c3e50" stroke-width="2"/>
                
                <!-- Leaf connections -->
                <line x1="150" y1="190" x2="100" y2="260" stroke="#2c3e50" stroke-width="2"/>
                <line x1="150" y1="190" x2="200" y2="260" stroke="#2c3e50" stroke-width="2"/>
                
                <line x1="350" y1="190" x2="300" y2="260" stroke="#2c3e50" stroke-width="2"/>
                <line x1="350" y1="190" x2="400" y2="260" stroke="#2c3e50" stroke-width="2"/>
                
                <line x1="450" y1="190" x2="400" y2="260" stroke="#2c3e50" stroke-width="2"/>
                <line x1="450" y1="190" x2="500" y2="260" stroke="#2c3e50" stroke-width="2"/>
                
                <line x1="650" y1="190" x2="580" y2="260" stroke="#2c3e50" stroke-width="2"/>
                <line x1="650" y1="190" x2="700" y2="260" stroke="#2c3e50" stroke-width="2"/>
                
                <!-- A-C subtree -->
                <line x1="580" y1="260" x2="550" y2="330" stroke="#2c3e50" stroke-width="2"/>
                <line x1="580" y1="260" x2="610" y2="330" stroke="#2c3e50" stroke-width="2"/>
                
                <!-- Edge labels (0/1) -->
                <text x="320" y="90" fill="#e74c3c" font-weight="bold" font-size="14">0</text>
                <text x="480" y="90" fill="#e74c3c" font-weight="bold" font-size="14">1</text>
                
                <text x="195" y="160" fill="#e74c3c" font-weight="bold" font-size="14">0</text>
                <text x="305" y="160" fill="#e74c3c" font-weight="bold" font-size="14">1</text>
                
                <text x="495" y="160" fill="#e74c3c" font-weight="bold" font-size="14">0</text>
                <text x="605" y="160" fill="#e74c3c" font-weight="bold" font-size="14">1</text>
                
                <text x="120" y="230" fill="#e74c3c" font-weight="bold" font-size="14">0</text>
                <text x="180" y="230" fill="#e74c3c" font-weight="bold" font-size="14">1</text>
                
                <text x="320" y="230" fill="#e74c3c" font-weight="bold" font-size="14">0</text>
                <text x="380" y="230" fill="#e74c3c" font-weight="bold" font-size="14">1</text>
                
                <text x="420" y="230" fill="#e74c3c" font-weight="bold" font-size="14">0</text>
                <text x="480" y="230" fill="#e74c3c" font-weight="bold" font-size="14">1</text>
                
                <text x="610" y="230" fill="#e74c3c" font-weight="bold" font-size="14">0</text>
                <text x="680" y="230" fill="#e74c3c" font-weight="bold" font-size="14">1</text>
                
                <text x="560" y="300" fill="#e74c3c" font-weight="bold" font-size="14">0</text>
                <text x="600" y="300" fill="#e74c3c" font-weight="bold" font-size="14">1</text>
                
                <!-- Nodes -->
                <!-- Root -->
                <circle cx="400" cy="50" r="25" fill="#7fb3d3" stroke="#2c3e50" stroke-width="2"/>
                <text x="400" y="55" text-anchor="middle" font-weight="bold" font-size="14">37</text>
                
                <!-- Internal nodes -->
                <circle cx="250" cy="120" r="25" fill="#7fb3d3" stroke="#2c3e50" stroke-width="2"/>
                <text x="250" y="125" text-anchor="middle" font-weight="bold" font-size="14">17</text>
                
                <circle cx="550" cy="120" r="25" fill="#7fb3d3" stroke="#2c3e50" stroke-width="2"/>
                <text x="550" y="125" text-anchor="middle" font-weight="bold" font-size="14">20</text>
                
                <circle cx="150" cy="190" r="25" fill="#7fb3d3" stroke="#2c3e50" stroke-width="2"/>
                <text x="150" y="195" text-anchor="middle" font-weight="bold" font-size="14">7</text>
                
                <circle cx="350" cy="190" r="25" fill="#7fb3d3" stroke="#2c3e50" stroke-width="2"/>
                <text x="350" y="195" text-anchor="middle" font-weight="bold" font-size="14">10</text>
                
                <circle cx="450" cy="190" r="25" fill="#7fb3d3" stroke="#2c3e50" stroke-width="2"/>
                <text x="450" y="195" text-anchor="middle" font-weight="bold" font-size="14">10</text>
                
                <circle cx="650" cy="190" r="25" fill="#7fb3d3" stroke="#2c3e50" stroke-width="2"/>
                <text x="650" y="195" text-anchor="middle" font-weight="bold" font-size="14">10</text>
                
                <circle cx="580" cy="260" r="25" fill="#7fb3d3" stroke="#2c3e50" stroke-width="2"/>
                <text x="580" y="265" text-anchor="middle" font-weight="bold" font-size="14">5</text>
                
                <!-- Leaf nodes -->
                <circle cx="100" cy="260" r="25" fill="#a8e6cf" stroke="#2c3e50" stroke-width="2"/>
                <text x="100" y="268" text-anchor="middle" font-weight="bold" font-size="12">B (3)</text>
                
                <circle cx="200" cy="260" r="25" fill="#a8e6cf" stroke="#2c3e50" stroke-width="2"/>
                <text x="200" y="268" text-anchor="middle" font-weight="bold" font-size="12">I (4)</text>
                
                <circle cx="300" cy="260" r="25" fill="#a8e6cf" stroke="#2c3e50" stroke-width="2"/>
                <text x="300" y="268" text-anchor="middle" font-weight="bold" font-size="12">D (5)</text>
                
                <circle cx="400" cy="260" r="25" fill="#a8e6cf" stroke="#2c3e50" stroke-width="2"/>
                <text x="400" y="268" text-anchor="middle" font-weight="bold" font-size="12">E (5)</text>
                
                <circle cx="420" cy="260" r="25" fill="#a8e6cf" stroke="#2c3e50" stroke-width="2"/>
                <text x="420" y="268" text-anchor="middle" font-weight="bold" font-size="12">G (5)</text>
                
                <circle cx="500" cy="260" r="25" fill="#a8e6cf" stroke="#2c3e50" stroke-width="2"/>
                <text x="500" y="268" text-anchor="middle" font-weight="bold" font-size="12">F (5)</text>
                
                <circle cx="700" cy="260" r="25" fill="#a8e6cf" stroke="#2c3e50" stroke-width="2"/>
                <text x="700" y="268" text-anchor="middle" font-weight="bold" font-size="12">H (5)</text>
                
                <circle cx="550" cy="330" r="25" fill="#a8e6cf" stroke="#2c3e50" stroke-width="2"/>
                <text x="550" y="338" text-anchor="middle" font-weight="bold" font-size="12">A (2)</text>
                
                <circle cx="610" cy="330" r="25" fill="#a8e6cf" stroke="#2c3e50" stroke-width="2"/>
                <text x
        
        <h4>2. Перевірити результат за допомогою коду</h4>
        
        <div class="code-block">
            <pre><code># A Вузол дерева Гафмена
import heapq


class node:
    def __init__(self, freq, symbol, left=None, right=None):
        # частота символу
        self.freq = freq
        # назва символу (символ)
        self.symbol = symbol
        # вузол ліворуч від поточного вузла
        self.left = left
        # вузол праворуч від поточного вузла
        self.right = right
        # напрямок дерева (0/1)
        self.huff = ''

    def __lt__(self, nxt):
        return self.freq < nxt.freq


# утиліта для виведення кодів Гафмена для
# всіх символів у щойно створеному дереві Гафмена
def printNodes(node, val=''):
    # Код Гафмена для поточного вузла
    newVal = val + str(node.huff)
    # якщо вершина не є реберною вершиною
    # то пройти всередині неї
    if (node.left):
        printNodes(node.left, newVal)
    if (node.right):
        printNodes(node.right, newVal)
        # якщо node є реберною вершиною тоді
        # вивести його хаффманівський код
    if (not node.left and not node.right):
        print(f"{node.symbol} -> {newVal}")


# символи для дерева Гафмена
chars = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I']
# частота символів
freq = [2, 3, 3, 5, 5, 5, 5, 5, 4]
# список, що містить невикористані вершини
nodes = []
# перетворення символів та частот
# у вузли дерева Гафмена
for x in range(len(chars)):
    heapq.heappush(nodes, node(freq[x], chars[x]))
while len(nodes) > 1:
    # відсортувати всі вершини за зростанням
    # на основі їх частоти
    left = heapq.heappop(nodes)
    right = heapq.heappop(nodes)
    # присвоїти значення напрямку цим вузлам
    left.huff = 0
    right.huff = 1
    # об'єднати 2 найменші вершини, щоб створити
    # новий вузол як їхній батько
    newNode = node(left.freq + right.freq, left.symbol + right.symbol, left, right)
    heapq.heappush(nodes, newNode)

# Друк кодів Гафмена
printNodes(nodes[0])</code></pre>
        </div>
        
        <div class="output-block">
            <pre>B -> 000
I -> 001
D -> 010
E -> 011
G -> 100
F -> 101
A -> 1100
C -> 1101
H -> 111</pre>
        </div>
        
        <h4>3. Процедура на Python, яка для вхідного повідомлення обчислює список символів chars та список їх частот freq</h4>
        
        <div class="code-block">
            <pre><code>def get_freq_table(message):
    
    char_freq = {}
    
    for char in message:
        if char in char_freq:
            char_freq[char] += 1
        else:
            char_freq[char] = 1
    
    chars = list(char_freq.keys())
    freq = [char_freq[char] for char in chars]
    
    return chars, freq</code></pre>
        </div>
        
        <h4>4. Декодування повідомлення, заданого варіантом</h4>
        
        <div class="code-block">
            <pre><code>import heapq
from collections import defaultdict

# to map each character its huffman value
codes = {}

# To store the frequency of character of the input data
freq = defaultdict(int)

# A Huffman tree node
class MinHeapNode:
    def __init__(self, data, freq):
        self.left = None
        self.right = None
        self.data = data
        self.freq = freq

    def __lt__(self, other):
        return self.freq < other.freq

# utility function to print characters along with
# there huffman value
def printCodes(root, str):
    if root is None:
        return
    if root.data != '$':
        print(root.data, ":", str)
    printCodes(root.left, str + "0")
    printCodes(root.right, str + "1")

# utility function to store characters along with
# there huffman value in a hash table
def storeCodes(root, str):
    if root is None:
        return
    if root.data != '$':
        codes[root.data] = str
    storeCodes(root.left, str + "0")
    storeCodes(root.right, str + "1")

# function to build the Huffman tree and store it
# in minHeap
def HuffmanCodes(size):
    global minHeap
    for key in freq:
        minHeap.append(MinHeapNode(key, freq[key]))
    heapq.heapify(minHeap)
    while len(minHeap) != 1:
        left = heapq.heappop(minHeap)
        right = heapq.heappop(minHeap)
        top = MinHeapNode('$', left.freq + right.freq)
        top.left = left
        top.right = right
        heapq.heappush(minHeap, top)
    storeCodes(minHeap[0], "")

# utility function to store map each character with its
# frequency in input string
def calcFreq(str, n):
    for i in range(n):
        freq[str[i]] += 1

# function iterates through the encoded string s
# if s[i]=='1' then move to node->right
# if s[i]=='0' then move to node->left
# if leaf node append the node->data to our output string
def decode_file(root, s):
    ans = ""
    curr = root
    n = len(s)
    for i in range(n):
        if s[i] == '0':
            curr = curr.left
        else:
            curr = curr.right

        # reached leaf node
        if curr.left is None and curr.right is None:
            ans += curr.data
            curr = root
    return ans + '\0'

# Driver code
if __name__ == "__main__":
    minHeap = []
    str = "AABBBCCCDDDDDEEEEEFFFFFGGGGGHHHHHIIII"
    encodedString, decodedString = "", ""
    calcFreq(str, len(str))
    HuffmanCodes(len(str))
    print("Character With there Frequencies:")
    for key in sorted(codes):
        print(key, codes[key])

    for i in str:
        encodedString += codes[i]

    print("\nEncoded Huffman data:")
    print(encodedString)

    # Function call
    decodedString = decode_file(minHeap[0], encodedString)
    print("\nDecoded Huffman Data:")
    print(decodedString)</code></pre>
        </div>
        
        <div class="output-block">
            <pre>Character With there Frequencies:
A 1100
B 000
C 1101
D 010
E 011
F 101
G 100
H 111
I 001

Encoded Huffman data:
11001100000000000110111011101010010010010010011011011011011101101101101101100100100100100111111111111111001001001001

Decoded Huffman Data:
AABBBCCCDDDDDEEEEEFFFFFGGGGGHHHHHIIII</pre>
        </div>
        
        <div class="questions-section">
            <h2>Відповіді на контрольні питання</h2>
            
            <div class="question">
                <div class="question-number">1. Що таке жадібні алгоритми?</div>
                <div class="answer">
                    Жадібні алгоритми — це алгоритми, які приймають найкраще локальне рішення на кожному кроці з надією отримати глобально оптимальне рішення.
                </div>
            </div>
            
            <div class="question">
                <div class="question-number">2. Що таке префіксний код? Який код використовується у коді Гафмена?</div>
                <div class="answer">
                    Префіксний код — це код, у якому жоден код слова не є префіксом іншого. У коді Гафмена використовується саме <strong>префіксний двійковий код</strong>.
                </div>
            </div>
            
            <div class="question">
                <div class="question-number">3. Як пов'язана структура даних «купа» зі структурою даних «черга з пріоритетами»?</div>
                <div class="answer">
                    Купа (heap) — це ефективна реалізація черги з пріоритетами, яка дозволяє швидко знаходити й видаляти елемент з найвищим (або найнижчим) пріоритетом.
                </div>
            </div>
            
            <div class="question">
                <div class="question-number">4. Що таке стиснення даних і для чого воно використовується? Які його основні переваги?</div>
                <div class="answer">
                    Стиснення — це процес зменшення розміру даних для економії пам'яті або пропускної здатності. Переваги: менше місця на диску, швидша передача через мережу, пришвидшення обробки.
                </div>
            </div>
            
            <div class="question">
                <div class="question-number">5. Які кроки необхідно виконати для стиснення даних за допомогою алгоритму кодування Гафмена?</div>
                <div class="answer">
                    <div class="step-list">
                        <ol>
                            <li>Обчислити частоти символів</li>
                            <li>Створити вузли для кожного символу</li>
                            <li>Побудувати дерево Гафмена з купою</li>
                            <li>Призначити коди символам</li>
                            <li>Замінити символи у даних на відповідні коди</li>
                        </ol>
                    </div>
                </div>
            </div>
            
            <div class="question">
                <div class="question-number">6. Які основні обмеження та недоліки алгоритму кодування Гафмена? Чи можливо покращити його продуктивність?</div>
                <div class="answer">
                    Недоліки: неефективний для коротких повідомлень або символів з майже однаковими частотами. Можна покращити, наприклад, за допомогою адаптивного або арифметичного кодування.
                </div>
            </div>
            
            <div class="question">
                <div class="question-number">7. Які існують альтернативні методи стиснення даних, що можуть конкурувати з алгоритмом Гафмена?</div>
                <div class="answer">
                    <ul>
                        <li>Арифметичне кодування</li>
                        <li>LZ77, LZ78, LZW</li>
                        <li>BWT (Burrows-Wheeler Transform)</li>
                        <li>RLE (Run-Length Encoding)</li>
                    </ul>
                </div>
            </div>
            
            <div class="question">
                <div class="question-number">8. Які практичні застосування можуть мати алгоритми стиснення даних, зокрема алгоритм Гафмена, у сучасних інформаційних системах?</div>
                <div class="answer">
                    <ul>
                        <li>Архіватори (ZIP, RAR)</li>
                        <li>Формати файлів (JPEG, MP3, PNG)</li>
                        <li>Передача даних через мережу</li>
                        <li>Бази даних, кешування та системи з обмеженим простором</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>
</html>